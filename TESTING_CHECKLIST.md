# 動作確認手順

## 前提条件
- フロントエンド開発サーバーが起動していること: `http://localhost:5174`
- バックエンドAPIが稼働していること: `https://shigezane-functions.azurewebsites.net/api`

---

## 1. ダッシュボードの確認

### 手順
1. ブラウザで `http://localhost:5174` にアクセス
2. ログインページが表示されたら、任意のメールアドレスでログイン（モック認証）
3. ダッシュボードが表示される

### 確認項目
- [ ] ローディングUI（Skeleton）が表示される
- [ ] KPIカード（総物件数、募集中物件、空室率）にデータが表示される
- [ ] カテゴリー別カード（賃貸、ウィークリー、土地、住宅、駐車場）にデータが表示される
- [ ] 数値が `0` でない（実際のデータが取得されている）
- [ ] エラーメッセージが表示されない

### 期待される表示例
```
総物件数: 10件
募集中物件: 5件
空室率: 50.0%

賃貸物件
全2件
募集中: 1件
入居中: 1件
```

---

## 2. 賃貸物件一覧の確認

### 手順
1. サイドバーから「賃貸物件」をクリック
2. 一覧ページが表示される

### 確認項目
- [ ] ローディングUI（Skeleton）が表示される
- [ ] 物件リストが表示される
- [ ] 各物件に以下の情報が表示される
  - 建物名
  - 部屋番号
  - 間取り
  - 家賃
  - ステータス（準備中/募集中/入居中）
- [ ] サムネイル画像が表示される
- [ ] 「新規登録」ボタンが表示される

---

## 3. 物件の新規登録（作成）

### 手順
1. 賃貸物件一覧で「新規登録」ボタンをクリック
2. フォーム画面が表示される
3. 必要項目を入力
   - 建物選択
   - 部屋番号
   - 階数
   - 間取り
   - 面積
   - 家賃
   - etc.
4. 「登録」ボタンをクリック

### 確認項目
- [ ] フォームが正しく表示される
- [ ] 建物セレクトボックスに選択肢が表示される
- [ ] 画像アップロードエリアが表示される
- [ ] バリデーションエラーが表示される（必須項目未入力時）
- [ ] 登録成功時にトースト通知「物件を登録しました」が表示される
- [ ] 一覧ページにリダイレクトされる

### ⚠️ 注意
- 画像アップロードは現在ダミー実装です
- Azure Blob Storage連携が未実装のため、実際には保存されません

---

## 4. 物件の編集

### 手順
1. 賃貸物件一覧で任意の物件の「編集」ボタンをクリック
2. フォーム画面が表示される（既存データが入力済み）
3. 内容を変更
4. 「更新」ボタンをクリック

### 確認項目
- [ ] 既存データがフォームに表示される
- [ ] 更新成功時にトースト通知「物件を更新しました」が表示される
- [ ] 一覧ページで変更が反映される

---

## 5. 物件の削除

### 手順
1. 賃貸物件一覧で任意の物件の「削除」ボタンをクリック
2. 確認ダイアログが表示される
3. 「OK」をクリック

### 確認項目
- [ ] 確認ダイアログが表示される
- [ ] 削除成功時にトースト通知「物件を削除しました」が表示される
- [ ] 一覧から削除される

---

## 6. エラーハンドリングの確認

### ネットワークエラーのシミュレーション
1. ブラウザの開発者ツールを開く（F12）
2. Networkタブで「Offline」に設定
3. 任意のページをリロード

### 確認項目
- [ ] トースト通知「サーバーに接続できません」が表示される
- [ ] エラー画面やフォールバックUIが表示される（現在未実装）

---

## 7. パフォーマンスの確認

### 手順
1. ブラウザの開発者ツール → Networkタブを開く
2. ダッシュボードを表示
3. API呼び出しを確認

### 確認項目
- [ ] 5つのAPI（getrentalunits, getweeklyunits, getlandproperties, gethouseproperties, getparkingspaces）が**並列**で呼び出される
- [ ] 全てのAPIが完了するまでの時間が短い（理想: 3秒以内）
- [ ] 2回目以降のアクセスはキャッシュから取得される（API呼び出しなし）

### キャッシュの確認
1. ダッシュボードを表示
2. 賃貸物件一覧に移動
3. 再度ダッシュボードに戻る
4. → **API呼び出しが発生しない**（10分間キャッシュされる）

---

## 8. 他の物件タイプの確認

### ウィークリー物件
- [ ] 一覧表示
- [ ] 新規登録
- [ ] 編集
- [ ] 削除

### 土地物件
- [ ] 一覧表示
- [ ] 新規登録
- [ ] 編集
- [ ] 削除

### 住宅物件
- [ ] 一覧表示
- [ ] 新規登録
- [ ] 編集
- [ ] 削除

### 駐車場
- [ ] 一覧表示
- [ ] 新規登録
- [ ] 編集
- [ ] 削除

---

## デバッグ情報の確認方法

### コンソールでAPIレスポンスを確認
ブラウザの開発者ツールで以下を実行：

```javascript
// ダッシュボードで実行
fetch('https://shigezane-functions.azurewebsites.net/api/getrentalunits')
  .then(res => res.json())
  .then(data => console.log(data));

// 期待される出力:
// {
//   "success": true,
//   "count": 1,
//   "data": [...]
// }
```

### React Queryのキャッシュ状態を確認
React Query Devtools（画面右下）で：
- [ ] クエリ一覧が表示される
- [ ] 各クエリのステータス（fresh, stale, fetching）が表示される
- [ ] キャッシュされたデータが表示される

---

## 問題が発生した場合

### データが表示されない
1. **ネットワークタブでAPI呼び出しを確認**
   - ステータスコード: 200 OK
   - レスポンス: `{"success": true, "data": [...]}`
2. **コンソールでエラーを確認**
   - TypeScriptエラー
   - APIエラー
3. **APIに直接アクセス**
   ```bash
   curl https://shigezane-functions.azurewebsites.net/api/getrentalunits
   ```

### タイムアウトエラー
- Azure Functionsがコールドスタート中
- 30秒待ってもタイムアウトする場合はバックエンドに問題がある可能性

### CORSエラー
- Azure Functions側のCORS設定を確認
- `Access-Control-Allow-Origin: *` が設定されているか

### 画像が表示されない
- 現在はダミーURL（placeholder.co）を使用
- Azure Blob Storageの実際のURLに変更後、CORSエラーが出る可能性あり

---

## ✅ 完了チェックリスト

### 基本機能
- [ ] ダッシュボードのデータ表示
- [ ] 賃貸物件の一覧表示
- [ ] 賃貸物件の新規登録
- [ ] 賃貸物件の編集
- [ ] 賃貸物件の削除

### パフォーマンス
- [ ] ローディングUIの表示
- [ ] 並列API呼び出し
- [ ] キャッシュが機能している

### エラーハンドリング
- [ ] API エラー時のトースト表示
- [ ] ネットワークエラー時の適切なメッセージ

---

**確認者**: _______________  
**確認日**: _______________  
**結果**: ✅ 合格 / ⚠️ 問題あり / ❌ 不合格
